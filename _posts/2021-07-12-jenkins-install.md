---
layout: post
title: 
tags: [jenkins, ci, docker, install, cd]
---

## Jenkins 란
젠킨스는 소프트웨어 개발과정에서 지속적으로 통합(Continuous Integration - CI) 서비스를 제공하는 툴이다. 

## Continuous Integration
CI는 다수의 개발자들이 하나의 프로그램을 개발할 때 소스코드의 충돌을 방지하기 위해 각자 작업한 내용을 공유 저장소에 빈번하게 업로드하는 것을 의미한다. 지속적 통합이 필요한 이유는 개발자가 장기간 격리된 상태로 작업하고, 작업이 완료된 후에 변경사항을 병합할 경우 충돌이 일어나고 버그가 발생하기 쉽기 때문이다. 지속적 통합은 단순히 작업한 내용을 업로드하는 것에 그치지 않고 소스코드를 병합하려고 할 때 빌드 및 유닛 테스트를 자동으로 수행한다. 젠킨스와 같은 CI 툴이 등장하기 전에는 일정시간마다 빌드를 진행하는 nightly-build 와 같은 작업을 통해 지속적 통합을 수행 했다. 젠킨스와 같은 CI 툴을 이용하면 주기적으로 빌드하는 것 외에도 소스의 커밋을 감지하고 자동적으로 빌드와 테스트를 수행하는 것이 가능하다.

## 지속적 통합의 이점
젠킨스와 같은 CI 툴을 사용함으로서 얻을 수 있는 이점은 아래와 같다.
- 정적 코드 분석에 의한 코딩 규약 준수여부 체크
- 프로젝트 표준 컴파일 환경에서 컴파일 오류 검출
- 자동화 테스트 수행
- 프로파일링 툴을 활용한 소스변경에 따른 성능 확인
- 결합 테스트 환경에 대한 배포작업
  
  이러한 작업들을 자동으로 수행함으로서 제품의 품질을 일정수준으로 유지하고, 프로덕트의 배포를 비교적 원활하게 도와줄 수 있다.
  
## 젠킨스에서 제공하는 기능들
젠킨스와 같은 CI 툴들이 제공하는 기능들
- 각종 배치 작업의 간략화. DB 세팅이나, 서버로 deploy 하는것과 같은 CLI를 통해 수작업으로 진행하던 작업들을 웹 인터페이스를 통해 수행 가능하다.
- Build 자동화. Java의 경우 maven이나 gradle을 젠킨스와 연동하여 빌드 자동화를 수행할 수 있다.
- 테스트 자동화. CI에 꼭 필요한 요소로 테스트 자동화를 꼽을 수 있다. 개인이 일일이 테스트를 수행하지 않아도 젠킨스의 테스트 자동화를 통해 품질 관리가 이루어진다.
- 코드 정적 분석. 코드 표준 준수 검사 혹은 코드 품질 검사를 통해 코드 품질을 유지한다.
- 빌드 파이프라인 구성. 2개 이상의 모듈로 구성되는 프로젝트는 빌드 파이프 라인을 통해 모듈별 참조 관계에 따라 빌드 파이프라인을 구성 할 수 있다.
  
  이제 젠킨스 설치에 대해 알아보자.
  
## 도커를 이용한 젠킨스 설치
도커를 이용하면 젠킨스 설치가 아주 쉽다. 도커는 설치되어 있다고 가정하고 진행한다.
```
docker pull jenkins/jenkins
```
위 명령어를 사용해 공식 젠킨스의 최신 이미지를 받는다.
```
docker run -d -p 8080:8080 -v /jenkins:/var/jenkins_home --name jenkins -u root jenkins/jenkins
```
도커를 실행한다. 포트나 컨테이너 이름은 각자 알아서 바꾸어도 좋다.
  브라우저를 통해 젠킨스에 접속한다. 내 경우 localhost:8080 으로 접속했다. 맨처음 접속하면 비밀번호를 물어본다. 젠킨스가 설치될 때 암호를 가르쳐 주는데 아래 명령어를 이용하면 컨테이너에서 수행한 로그를 확인 할 수 있다.
```
docker logs jenkins
```
여기서 jenkins는 컨테이너 이름이므로 자신의 컨테이너 이름에 맞추어 써준다. 로그를 보면
```
Jenkins initial setup is required. An admin user has been created and a password generated.
Please use the following password to proceed to installation:
```
이렇게 적혀있는 부분 아래에 암호가 있다. 이것을 복사해서 젠킨스에 접속한다. 다음 화면에서는 플러그인 설치에 대한 화면인데 일단 권장 플러그인 설치를 진행하자. 유저 설정이 나오면 계정을 생성할수도 있다. 나는 admin 아이디와 아까 복사했던 암호를 이용해 로그인 했다. 젠킨스에 접속하면 admin 암호를 자신의 암호로 바꾸어 줄 수 있다.
 
 이제 젠킨스에서 제공하는 여러 기능들을 하나씩 실제로 적용 해보자.
 
출처: https://ict-nroo.tistory.com/31  
https://aws.amazon.com/ko/devops/continuous-integration/
