---
layout: post
title: Dockerfile
tags: [docker, build, dockerfile]
---

## Dockerfile
도커 이미지를 빌드하기 위한 정보를 담아놓은 파일  
dockrfile은 전용 도메인 언어로 이미지 구성을 정의하는데 FROM, RUN과 같은 키워드를 인스트럭션(명령)이라 한다.

### FROM 인스트럭션
* 꼭 있어야 하는 인스트럭션
* 도커 이미지의 바탕이 될 베이스 이미지를 지정
* 기본적으로 도커 허브 레지스트리에서 참조
* FROM [이미지 이름]: [태그 이름]

### RUN 인스트럭션
* 도커 이미지를 실행할 때 컨테이너 안에서 실행할 명령을 정의
* 도커 컨테이너 안에서 실행할 명령을 그대로 기술

### Copy 인스트럭션
* 도커가 동작 중인 호스트 며신의 파일이나 디렉터리를 도커 컨테이너 안으로 복사하는 인스트럭션

### Entrypoint 인스트럭션
* 컨테이너의 명령 실행 방식을 조정
* CMD와 마찬가지로 컨테이너 안에서 실행할 프로세스를 지정하는 인스트럭션
* entrypoint를 지정하면 cmd의 인자가 entrypoint에서 실행하는 파일에 인자로 주어짐

### CMD 인스트럭션
* 도커 컨테이너를 실행할 때 컨테이너 안에서 실행할 프로세스를 지정
* RUN 인스트럭션은 이미지를 빌드할 때 실행되고 CMD 인스트럭션은 컨테이너를 시작할 때 한 번 실행
  * CMD\["실행 파일", "인자1",ㅡ "인자2"\] - 실행파일에 인자를 전달(권장방식)
  * CMD 명령 인자1 인자2 - 명령과 인자를 지정, 셸에서 실행되므로 셸에 정의된 변수를 참조할 수 있음
  * CMD \["인자1", "인자2"\] - entrypoint에 지정된 명령에 사용할 인자를 전달

### ENV 인스트럭션
* 도커 컨테이너 안에서 사용할 수 있는 환경변수를 지정

### ARG 인스트럭션
* 이미지를 빌드할 때 정보를 함게 넣기 위해 사용한다. 이미지를 빌드할 때만 사용할 수 있는 일시적인 환경변수



출처: 도커/쿠버네티스를 활용한 컨테이너 개발 실전 입문  
  
